<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tiara Liz Thomas — Holy Communion RSVP</title>

  <!-- Elegant fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Theme matched to your stage photo: ivory + white + sage greenery + champagne gold */
      --bg:#f8f7f4;            /* soft ivory */
      --card:#ffffff;          /* clean white */
      --text:#2f2f2f;          /* soft charcoal */
      --muted:#6f756f;         /* muted grey-green */
      --sage:#7f8f7a;          /* greenery */
      --sage-light:#e7efe7;    /* subtle green tint */
      --gold:#c9a44a;          /* champagne gold */
      --gold-soft:#f1e7c6;     /* very light gold */
      --border:#e6e6e2;        /* warm border */
      --shadow: 0 12px 30px rgba(0,0,0,.06);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background: var(--bg);
      min-height:100vh;
      padding:18px;
      display:flex;
      justify-content:center;
    }
    .wrap{width:min(1040px, 100%)}

    /* HERO */
    .hero{
      background: var(--card);
      border:1px solid var(--border);
      border-radius:22px;
      box-shadow: var(--shadow);
      overflow:hidden;
      margin-bottom:16px;
      position:relative;
    }

    /* soft arch + floral hint (no images) */
    .hero::before{
      content:"";
      position:absolute;
      inset:-40px -40px auto -40px;
      height:220px;
      background:
        radial-gradient(260px 160px at 20% 40%, rgba(127,143,122,.18), transparent 60%),
        radial-gradient(240px 160px at 80% 30%, rgba(201,164,74,.18), transparent 62%),
        radial-gradient(240px 160px at 55% 10%, rgba(127,143,122,.10), transparent 62%);
      pointer-events:none;
    }
    .hero-inner{
      position:relative;
      padding:18px 16px;
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }

    .badge{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding:8px 14px;
      border-radius:999px;
      border:1px solid var(--gold);
      background: var(--gold-soft);
      color:#6a571f;
      font-weight:700;
      font-size:13px;
      letter-spacing:.3px;
      width:fit-content;
    }

    .h-title{
      margin:10px 0 6px;
      font-family:"Playfair Display", serif;
      font-size: clamp(30px, 8vw, 52px);
      line-height:1.05;
      letter-spacing:.2px;
    }
    .h-sub{
      margin:0;
      color: var(--muted);
      font-size:15px;
      line-height:1.6;
      max-width: 65ch;
    }

    .gold-divider{
      margin:12px 0 0;
      width:90px;
      height:3px;
      border-radius:999px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
    }

    .hero-card{
      border-radius:18px;
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(127,143,122,.10), rgba(127,143,122,.05));
      padding:14px;
    }
    .hero-card h3{
      margin:0 0 10px;
      font-size:12px;
      letter-spacing:.25px;
      color: rgba(47,47,47,.75);
      font-weight:800;
      text-transform:uppercase;
    }
    .timeline{display:grid; gap:10px}
    .titem{
      display:flex; gap:10px; align-items:flex-start;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background: rgba(248,247,244,.65);
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: var(--gold);
      margin-top:6px;
      box-shadow: 0 0 0 4px rgba(201,164,74,.18);
      flex:0 0 auto;
    }
    .tname{font-weight:900}
    .ttime{color: rgba(47,47,47,.75); font-size:13px; margin-top:2px}

    /* MAIN GRID (mobile-first) */
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:16px;
    }

    /* Cards */
    .card{
      background: var(--card);
      border:1px solid var(--border);
      border-radius:22px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .head{
      padding:16px 16px;
      border-bottom:1px solid var(--border);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .title{
      font-family:"Playfair Display", serif;
      font-size:18px;
      font-weight:700;
    }
    .pill{
      font-size:12px;
      border:1px solid rgba(127,143,122,.35);
      background: rgba(127,143,122,.10);
      color: #3f5340;
      padding:6px 10px;
      border-radius:999px;
      white-space:nowrap;
      font-weight:800;
    }
    .content{padding:16px}

    /* Form */
    form{display:grid; gap:12px}
    label{display:grid; gap:6px; font-size:13px; color: var(--muted)}

    input, select{
      width:100%;
      padding:14px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#fbfbfa;
      color:var(--text);
      outline:none;
      font-size:16px; /* prevents iOS zoom */
      transition: opacity .15s ease, filter .15s ease, box-shadow .15s ease;
    }
    input:focus, select:focus{
      border-color: rgba(201,164,74,.60);
      box-shadow: 0 0 0 4px rgba(201,164,74,.14);
    }
    input:disabled{
      opacity:.55;
      filter:saturate(.7);
      cursor:not-allowed;
      background:#f5f5f2;
    }

    .two{display:grid; grid-template-columns:1fr; gap:12px}

    .actions{
      display:flex; gap:10px; flex-wrap:wrap;
      position: sticky; bottom: 10px;
      background: linear-gradient(180deg, rgba(248,247,244,0), rgba(248,247,244,.95));
      padding-top: 10px;
      margin-top: 6px;
    }
    button{
      cursor:pointer;
      border:0;
      border-radius:16px;
      padding:14px 14px;
      font-weight:900;
      font-size:15px;
      width:100%;
    }
    .btn{
      background: linear-gradient(180deg, #8fa68a, #7f8f7a);
      color:#ffffff;
      font-weight:900;
    }
    .btn:hover{filter:brightness(1.03)}
    .ghost{
      background: #ffffff;
      color: var(--text);
      border:1px solid var(--border);
      font-weight:900;
    }

    .note{font-size:12px; color: var(--muted); margin:8px 0 0}
    .msg{
      display:none;
      margin-top:12px;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid var(--border);
      background: rgba(127,143,122,.08);
      font-size:14px;
    }
    .msg.ok{border-color: rgba(127,143,122,.35)}
    .msg.err{
      border-color: rgba(201,90,74,.35);
      background: rgba(201,90,74,.08);
    }

    /* Info */
    .info{display:grid; gap:12px; padding:16px}
    .row{
      display:flex; gap:12px; align-items:flex-start;
      padding:12px 12px;
      border:1px solid var(--border);
      border-radius:16px;
      background: rgba(248,247,244,.65);
      flex-wrap:wrap;
    }
    .k{min-width:110px; color: var(--muted); font-size:13px}
    .v{font-size:14px; line-height:1.5}
    .mapbtn{
      display:inline-block;
      margin-top:8px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(127,143,122,.30);
      background: rgba(127,143,122,.10);
      color: #2f2f2f;
      text-decoration:none;
      font-weight:900;
      font-size:13px;
    }

    footer{
      margin:14px 0 0;
      text-align:center;
      color: rgba(111,117,111,.95);
      font-size:12px
    }

    /* Desktop */
    @media (min-width: 920px){
      body{padding:22px}
      .hero-inner{
        grid-template-columns: 1.1fr .9fr;
        padding: 26px 22px;
        align-items:end;
      }
      .grid{grid-template-columns: 1.2fr .8fr}
      .content{padding:16px 18px}
      .head{padding:16px 18px}
      .two{grid-template-columns:1fr 1fr}
      .actions{position:static; background:none; padding-top:0}
      button{width:auto}
      .btn{flex:1}
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- HERO -->
    <section class="hero">
      <div class="hero-inner">
        <div>
          <div class="badge">✦ First Holy Communion</div>
          <h1 class="h-title">Tiara Liz Thomas</h1>
          <p class="h-sub">April 06 • A day of faith, grace, and celebration. Please RSVP below.</p>
          <div class="gold-divider"></div>
        </div>

        <div class="hero-card">
          <h3>Program</h3>
          <div class="timeline">
            <div class="titem">
              <div class="dot"></div>
              <div>
                <div class="tname">Holy Mass</div>
                <div class="ttime">3:00 PM</div>
              </div>
            </div>
            <div class="titem">
              <div class="dot"></div>
              <div>
                <div class="tname">Reception</div>
                <div class="ttime">6:30 PM</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="grid">
      <!-- RSVP FORM -->
      <div class="card">
        <div class="head">
          <div class="title">RSVP</div>
          <div class="pill">Saved to Google Sheet</div>
        </div>

        <div class="content">
          <form id="rsvpForm" novalidate>
            <label>
              Family Name / Your Name *
              <input name="familyName" required placeholder="e.g., Thomas" />
            </label>

            <label>
              Attending? *
              <select name="attending" id="attending" required>
                <option value="" selected disabled>Select…</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </label>

            <div class="two">
              <label>
                Number of Adults attending *
                <input type="number" id="adults" name="adults" min="0" required value="0" />
              </label>

              <label>
                Number of Kids (Below 14)
                <input type="number" id="kids" name="kids" min="0" value="0" />
              </label>
            </div>

            <div class="actions">
              <button class="btn" type="submit">Submit RSVP</button>
              <button class="ghost" type="button" id="resetBtn">Clear</button>
            </div>

            <p class="note">Your RSVP will be recorded to our Google Sheet.</p>
            <div class="msg ok" id="okMsg">✅ Thanks! Your RSVP has been recorded.</div>
            <div class="msg err" id="errMsg">❌ Sorry — something went wrong. Please try again.</div>
          </form>
        </div>
      </div>

      <!-- EVENT INFO -->
      <div class="card">
        <div class="head">
          <div class="title">Event Details</div>
          <div class="pill">Locations</div>
        </div>

        <div class="info">
          <div class="row">
            <div class="k">Date</div>
            <div class="v">April 06</div>
          </div>

          <div class="row">
            <div class="k">Church</div>
            <div class="v">
              Saint Michael's Catholic Church<br/>
              129 High St, Berwick VIC 3806<br/>
              <a class="mapbtn" target="_blank"
                 href="https://www.google.com/maps/search/?api=1&query=Saint%20Michael%27s%20Catholic%20Church%2C%20129%20High%20St%2C%20Berwick%20VIC%203806">
                Open Church in Google Maps
              </a>
            </div>
          </div>

          <div class="row">
            <div class="k">Reception</div>
            <div class="v">
              Golden Castle Function Centre<br/>
              Hampton Park, Victoria<br/>
              <a class="mapbtn" target="_blank"
                 href="https://www.google.com/maps/search/?api=1&query=Golden%20Castle%20Function%20Centre%2C%20Hampton%20Park%2C%20Victoria">
                Open Reception in Google Maps
              </a>
            </div>
          </div>

          <div class="row">
            <div class="k">Times</div>
            <div class="v">
              Holy Mass: <b>3:00 PM</b><br/>
              Reception: <b>6:30 PM</b>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>Tip: share this RSVP page link on WhatsApp / SMS / email.</footer>
  </div>

  <script>
    // Google Form endpoint
    const FORM_ACTION =
      "https://docs.google.com/forms/d/e/1FAIpQLSf26EDBCCSbnyzG39YNCY3YQ8btg2r1uUcti29MCU94SLxaJA/formResponse";

    // Entry IDs (from your pre-filled link)
    const ENTRY_MAP = {
      familyName: "entry.169108837",
      attending:  "entry.1331553265",
      adults:     "entry.944248803",
      kids:       "entry.1620308496"
    };

    const form = document.getElementById("rsvpForm");
    const okMsg = document.getElementById("okMsg");
    const errMsg = document.getElementById("errMsg");
    const resetBtn = document.getElementById("resetBtn");

    const attendingSelect = document.getElementById("attending");
    const adultsInput = document.getElementById("adults");
    const kidsInput = document.getElementById("kids");

    const show = (el) => el.style.display = "block";
    const hide = (el) => el.style.display = "none";

    function updateAttendanceRules() {
      const attending = attendingSelect.value;

      if (attending === "Yes") {
        // Enable fields
        adultsInput.disabled = false;
        kidsInput.disabled = false;

        // Adults must be at least 1 when attending
        adultsInput.min = 1;
        adultsInput.required = true;

        // Ensure not 0
        if (parseInt(adultsInput.value || "0", 10) < 1) adultsInput.value = 1;

      } else if (attending === "No") {
        // Disable & reset numbers
        adultsInput.value = 0;
        kidsInput.value = 0;

        adultsInput.disabled = true;
        kidsInput.disabled = true;

        adultsInput.required = false;
        adultsInput.min = 0;

      } else {
        // No selection yet
        adultsInput.disabled = false;
        kidsInput.disabled = false;
        adultsInput.min = 0;
        adultsInput.required = true;
      }
    }

    attendingSelect.addEventListener("change", updateAttendanceRules);
    updateAttendanceRules();

    resetBtn.addEventListener("click", () => {
      form.reset();
      hide(okMsg); hide(errMsg);
      updateAttendanceRules();
    });

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      hide(okMsg); hide(errMsg);

      // Enforce rule: If attending Yes, adults must be >= 1
      if (attendingSelect.value === "Yes" && parseInt(adultsInput.value || "0", 10) < 1) {
        adultsInput.focus();
        adultsInput.setCustomValidity("Please enter at least 1 adult.");
        adultsInput.reportValidity();
        adultsInput.setCustomValidity("");
        return;
      }

      // If attending No, ensure 0s are sent
      if (attendingSelect.value === "No") {
        adultsInput.value = 0;
        kidsInput.value = 0;
      }

      const data = Object.fromEntries(new FormData(form).entries());
      const fd = new FormData();
      for (const [name, entryId] of Object.entries(ENTRY_MAP)) {
        fd.append(entryId, data[name] ?? "");
      }

      try {
        await fetch(FORM_ACTION, { method: "POST", mode: "no-cors", body: fd });
        show(okMsg);
        form.reset();
        updateAttendanceRules();
      } catch (err) {
        show(errMsg);
      }
    });
  </script>
</body>
</html>
